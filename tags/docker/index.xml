<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Docker on Coding notes - cheat sheets and snippets</title>
    <link>https://www.bustroker.com/tags/docker/</link>
    <description>Recent content in Docker on Coding notes - cheat sheets and snippets</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 06 Feb 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://www.bustroker.com/tags/docker/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Running Docker on Mac with Colima</title>
      <link>https://www.bustroker.com/notes/running-docker-on-mac-with-colima/</link>
      <pubDate>Tue, 06 Feb 2024 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/running-docker-on-mac-with-colima/</guid>
      <description>Goal: Replace Docker Desktop with Colima, a lightweight alternative for running Docker containers on Mac and Linux.&#xA;Find Colima at https://github.com/abiosoft/colima&#xA;Installation brew install docker-credential-helper docker brew install colima Start Colima colima start Verify Docker docker ps Fix Docker Socket Issues Some applications fail to connect with:&#xA;Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running? Set the correct socket path:&#xA;export DOCKER_HOST=unix://${HOME}/.colima/default/docker.sock </description>
    </item>
    <item>
      <title>Running Trivy Security Scanner from Docker on macOS</title>
      <link>https://www.bustroker.com/notes/running-trivy-security-scanner-from-docker-on-macos/</link>
      <pubDate>Tue, 14 Mar 2023 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/running-trivy-security-scanner-from-docker-on-macos/</guid>
      <description>Goal: Run Trivy security scanner using Docker without installing it locally.&#xA;Official documentation: https://aquasecurity.github.io/trivy/v0.38/&#xA;Basic Usage docker run aquasec/trivy version Scan Local Filesystem docker run -v /host/src/to/scan:/target aquasec/trivy --debug fs /target &amp;gt; trivy-output-report.txt Output file is created in your current directory.&#xA;https://aquasecurity.github.io/trivy/v0.20.2/getting-started/cli/fs/&#xA;Scan Git Repository Public repositories only: https://aquasecurity.github.io/trivy/v0.20.2/vulnerability/scanning/git-repository/&#xA;docker run aquasec/trivy repo REPO_URL Scan .NET Projects Trivy requires packages.config or *.deps.json files. For projects using &amp;lt;PackageReference/&amp;gt;, build first to generate the deps file:</description>
    </item>
    <item>
      <title>Run Jupyter Notebook with Spark in Docker</title>
      <link>https://www.bustroker.com/notes/run-jupyter-notebook-with-spark-in-docker/</link>
      <pubDate>Sun, 15 Aug 2021 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/run-jupyter-notebook-with-spark-in-docker/</guid>
      <description>Goal Run a Jupyter notebook with Apache Spark support using Docker, enabling Scala code execution and Spark monitoring.&#xA;Setup Pull and run the Spark-enabled Jupyter container:&#xA;docker run -p 8888:8888 -p 4041:4041 jupyter/all-spark-notebook This exposes:&#xA;Port 8888: Jupyter interface Port 4041: Spark WebUI Access Jupyter Copy the authentication token from the terminal output Navigate to localhost:8888 in your browser Authenticate using the token Write Spark Code Create a new notebook with the spylon-kernel kernel to write Scala code with Spark.</description>
    </item>
    <item>
      <title>Run Elasticsearch in Docker inside Vagrant VM</title>
      <link>https://www.bustroker.com/notes/run-elasticsearch-in-docker-inside-vagrant-vm/</link>
      <pubDate>Mon, 03 May 2021 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/run-elasticsearch-in-docker-inside-vagrant-vm/</guid>
      <description>Goal Run Elasticsearch in a Docker container inside an Ubuntu VM managed by Vagrant, with data persistence and port forwarding to your host machine.&#xA;Setup Files Vagrantfile&#xA;Vagrant.configure(&amp;#34;2&amp;#34;) do |config| config.vm.box = &amp;#34;ubuntu/focal64&amp;#34; # v 20.04 LTS config.vm.synced_folder &amp;#34;./&amp;#34;, &amp;#34;/vagrant&amp;#34; config.vm.network &amp;#34;forwarded_port&amp;#34;, guest: 9200, host: 9200 config.vm.network &amp;#34;forwarded_port&amp;#34;, guest: 9300, host: 9300 config.vm.provision :shell, path: &amp;#34;vagrant_provision.sh&amp;#34; config.vm.provider &amp;#34;virtualbox&amp;#34; do |vb| vb.name = &amp;#34;Elasticsearch&amp;#34; vb.memory = 1024 end end vagrant_provision.sh&#xA;echo &amp;#34;provisioning VM.</description>
    </item>
    <item>
      <title>ASP.NET 4.7 in Docker with IIS and Self-Signed SSL Certificate</title>
      <link>https://www.bustroker.com/notes/asp.net-4.7-in-docker-with-iis-and-self-signed-ssl-certificate/</link>
      <pubDate>Tue, 13 Apr 2021 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/asp.net-4.7-in-docker-with-iis-and-self-signed-ssl-certificate/</guid>
      <description>Goal: Run an ASP.NET 4.7 application in a Docker container with IIS and HTTPS support, using a volume-mapped folder for live code updates during development.&#xA;Dockerfile FROM mcr.microsoft.com/dotnet/framework/aspnet:4.8 SHELL [ &amp;#34;powershell&amp;#34; ] COPY src/Bustroker.LocalEnv.WebUI/bin/app.publish c:/webapp ADD configureIIS.ps1 /windows/temp/configureIIS.ps1 RUN powershell.exe -executionpolicy bypass c:\windows\temp\configureIIS.ps1 IIS Configuration Script Create configureIIS.ps1:&#xA;## Configure SSL certificate for default website Import-Module WebAdministration Set-Location IIS:\SslBindings New-WebBinding -Name &amp;#34;Default Web Site&amp;#34; -IP &amp;#34;*&amp;#34; -Port 443 -Protocol https $c = New-SelfSignedCertificate -DnsName &amp;#34;localhost&amp;#34; -CertStoreLocation cert:\LocalMachine\My $c | New-Item 0.</description>
    </item>
    <item>
      <title>MSSQL Server 2019 Docker Image for Windows</title>
      <link>https://www.bustroker.com/notes/mssql-server-2019-docker-image-for-windows/</link>
      <pubDate>Fri, 26 Mar 2021 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/mssql-server-2019-docker-image-for-windows/</guid>
      <description>Goal: Build a custom Docker image for MSSQL Server 2019 on Windows (official images don&amp;rsquo;t include 2019 yet).&#xA;Get Your Windows Version The base image must match your host Windows version. Run:&#xA;ver Output example: 10.0.19042.867&#xA;Dockerfile FROM mcr.microsoft.com/windows/servercore:10.0.19042.867 SHELL [ &amp;#34;powershell&amp;#34; ] COPY ./setupScripts/installSqlServerTools.ps1 /setupScripts/installSqlServerTools.ps1 COPY ./setupScripts/startAndConfigSqlServer.ps1 /setupScripts/startAndConfigSqlServer.ps1 COPY ./installers /installers RUN c:/setupScripts/installSqlServerTools.ps1 CMD /setupScripts/startAndConfigSqlServer.ps1 -sa_password \$env:sa_password -attach_dbs &amp;#34;\$env:attach_dbs&amp;#34; -ACCEPT_EULA Y -Verbose Required Files Place these in the installers/ directory:</description>
    </item>
    <item>
      <title>Run MSSQL 2017 Server in Docker for Windows</title>
      <link>https://www.bustroker.com/notes/run-mssql-2017-server-in-docker-for-windows/</link>
      <pubDate>Fri, 26 Mar 2021 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/run-mssql-2017-server-in-docker-for-windows/</guid>
      <description>Goal: Run MSSQL Server 2017 in Docker on Windows with persistent database storage mapped to the host filesystem.&#xA;Note: MSSQL 2019 not available in official images at time of writing.&#xA;Docker Compose Setup // docker-compose.yaml version: &amp;#39;3.8&amp;#39; services: SQLServer: image: microsoft/mssql-server-windows-developer:2017 environment: - ACCEPT_EULA=Y - SA_PASSWORD=Password_01 # - attach_dbs=[{&amp;#39;dbName&amp;#39;:&amp;#39;Joker&amp;#39;,&amp;#39;dbFiles&amp;#39;:[&amp;#39;C:\\SQLData\\Joker1.mdf&amp;#39;,&amp;#39;C:\\SQLData\\Joker1.ldf&amp;#39;]},{&amp;#39;dbName&amp;#39;:&amp;#39;Joker2&amp;#39;,&amp;#39;dbFiles&amp;#39;:[&amp;#39;C:\\SQLData\\Joker2.mdf&amp;#39;,&amp;#39;C:\\SQLData\\Joker2.ldf&amp;#39;]}] ports: - &amp;#39;1433:1433&amp;#39; volumes: - ./data:c:\SqlData Important: On first run, omit the attach_dbs argument. Use it only when restarting with existing database files.</description>
    </item>
    <item>
      <title>Run MSSQL Server in Docker inside Vagrant Ubuntu VM</title>
      <link>https://www.bustroker.com/notes/run-mssql-server-in-docker-inside-vagrant-ubuntu-vm/</link>
      <pubDate>Fri, 05 Mar 2021 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/run-mssql-server-in-docker-inside-vagrant-ubuntu-vm/</guid>
      <description>Goal Run Microsoft SQL Server in a Docker container inside a Vagrant Ubuntu VM, accessible from the host machine.&#xA;Configuration Files Vagrantfile&#xA;Vagrant.configure(&amp;#34;2&amp;#34;) do |config| config.vm.box = &amp;#34;ubuntu/focal64&amp;#34; # v 20.04 LTS config.vm.synced_folder &amp;#34;./&amp;#34;, &amp;#34;/vagrant&amp;#34; config.vm.network &amp;#34;forwarded_port&amp;#34;, guest: 1433, host: 1433 config.vm.provision :shell, path: &amp;#34;vagrant_provision.sh&amp;#34; config.vm.provider &amp;#34;virtualbox&amp;#34; do |vb| vb.name = &amp;#34;SqlServer&amp;#34; vb.memory = 2048 # Minimum 2GB required end end vagrant_provision.sh&#xA;echo &amp;#34;provisioning VM...&amp;#34; sudo apt update sudo apt-get update ## install docker and run sudo apt -y install docker.</description>
    </item>
    <item>
      <title>Dockerizing Azure Functions with .NET</title>
      <link>https://www.bustroker.com/notes/dockerizing-azure-functions-with-.net/</link>
      <pubDate>Mon, 05 Oct 2020 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/dockerizing-azure-functions-with-.net/</guid>
      <description>Goal Run Azure Functions in Docker containers with configuration and dependency injection support.&#xA;Setup Install Azure Functions Core Tools: https://docs.microsoft.com/en-us/azure/azure-functions/functions-run-local?tabs=windows%2Ccsharp%2Cbash#install-the-azure-functions-core-tools&#xA;Create Project func init Bustroker.HttpEndpoint.Func --dotnet --docker The --docker flag generates a Dockerfile. Rename the .csproj file if needed (e.g., Bustroker_HttpEndpoint_Func.csproj â†’ Bustroker.HttpEndpoint.Func.csproj).&#xA;Create Function cd Bustroker.HttpEndpoint.Func func new --name HttpEndpoint --template HttpTrigger Configuration Injection Add required packages:&#xA;dotnet add package Microsoft.Azure.Functions.Extensions dotnet add package Microsoft.NET.Sdk.Functions Make the function non-static and inject IConfiguration:</description>
    </item>
    <item>
      <title>Running ASP.NET Core in Docker with Vagrant</title>
      <link>https://www.bustroker.com/notes/running-asp.net-core-in-docker-with-vagrant/</link>
      <pubDate>Sat, 08 Aug 2020 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/running-asp.net-core-in-docker-with-vagrant/</guid>
      <description>Goal Run an ASP.NET Core application in Docker inside a Linux VM, accessible from your host machine.&#xA;Create the ASP.NET Core application dotnet new webapi -n Bustroker.Notes.WebApi Create Linux VM with Vagrant Configure Vagrantfile to map port 8080 from VM to host:&#xA;config.vm.network &amp;#34;forwarded_port&amp;#34;, guest: 8080, host: 8080 Setup Docker Dockerfile:&#xA;FROM mcr.microsoft.com/dotnet/sdk:5.0 AS build-env WORKDIR /app ## Copy csproj and restore as distinct layers COPY *.csproj ./ RUN dotnet restore ## Copy everything else and build COPY .</description>
    </item>
    <item>
      <title>Docker Command Reference</title>
      <link>https://www.bustroker.com/notes/docker-command-reference/</link>
      <pubDate>Thu, 23 Jul 2020 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/docker-command-reference/</guid>
      <description>Version: 19.03&#xA;Building Images Build with single tag:&#xA;docker build -t bustroker.notes.webui:v1 . Build with multiple tags:&#xA;docker build -t bustroker.notes.webui:v1 -t bustroker.notes.webui:latest . Debug build by viewing command output:&#xA;docker build -t bustroker.notes.webui --progress=plain --no-cache . Tagging Images Tag for registry:&#xA;docker tag [localImage] [registryServer]/[imageName]:[version] ## example docker tag bustroker.notes.webui:v1 bustrokeracr.azurecr.io/bustroker.notes.webui:v1 Add tag to existing image:&#xA;docker tag bustroker.notes.webui:v1 bustroker.notes.webui:latest Managing Images List images:&#xA;docker images Remove all images (add -f to force):</description>
    </item>
    <item>
      <title>Minimal Node.js Express API</title>
      <link>https://www.bustroker.com/notes/minimal-node.js-express-api/</link>
      <pubDate>Wed, 17 Apr 2019 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/minimal-node.js-express-api/</guid>
      <description>Goal Create a minimal Express API server and run it locally or in Docker.&#xA;Setup npm init npm install express Server Create server.js:&#xA;// ./server.js const express = require(&amp;#39;express&amp;#39;); const app = express(); app.get(&amp;#39;/&amp;#39;, (req, res) =&amp;gt; { res.send({ message: &amp;#34;I&amp;#39;m here&amp;#34;}); }); app.listen(3000, () =&amp;gt; console.log(&amp;#39;Listening on port 3000!&amp;#39;)); Run it:&#xA;node server.js Test it:&#xA;curl localhost:3000 Docker Create Dockerfile:&#xA;## ./Dockerfile FROM node WORKDIR /usr/src/app COPY package*.json ./ RUN npm install COPY .</description>
    </item>
    <item>
      <title>Minimal Node.js Express Static File Server</title>
      <link>https://www.bustroker.com/notes/minimal-node.js-express-static-file-server/</link>
      <pubDate>Wed, 17 Apr 2019 00:00:00 +0000</pubDate>
      <guid>https://www.bustroker.com/notes/minimal-node.js-express-static-file-server/</guid>
      <description>Build a minimal static file server with Express.&#xA;Setup npm init npm install express --save Server Create server.js:&#xA;// server.js const express = require(&amp;#39;express&amp;#39;); const app = express(); app.use(express.static(&amp;#39;www&amp;#39;)) /* routes root &amp;#39;/&amp;#39; to index.html */ app.get(&amp;#39;/&amp;#39;, (req, res) =&amp;gt; { res.sendFile(&amp;#39;/index.html&amp;#39;); }) app.listen(3000, () =&amp;gt; console.log(&amp;#39;Listening on port 3000..&amp;#39;)); All files in www folder are now served automatically.&#xA;Static Content Create www/index.html:&#xA;&amp;lt;!DOCTYPE html&amp;gt; &amp;lt;html lang=&amp;#34;en&amp;#34;&amp;gt; &amp;lt;head&amp;gt; &amp;lt;title&amp;gt;Static express&amp;lt;/title&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt; &amp;lt;div&amp;gt; &amp;lt;p&amp;gt;All work and no play makes Jack a dull boy.</description>
    </item>
  </channel>
</rss>
